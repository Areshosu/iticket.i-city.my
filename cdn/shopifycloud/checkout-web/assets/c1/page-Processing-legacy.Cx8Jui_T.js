System.register(["./app-legacy.CVtZXpP_.js","./RemoteCheckoutLogo-legacy.BLIJpaJ3.js"],(function(e,t){"use strict";var n,o,s,i,a,r,l,c,d,u,m,p,h,g,f,v,I,y,x,C,b,k,L,S,N,T,R,P,j,M,_,w,A,z,F,O,E,U,$,Y,Z;return{setters:[e=>{n=e.aF,o=e.k,s=e.aN,i=e.cK,a=e.i,r=e.c6,l=e.cL,c=e.cM,d=e.z,u=e.a,m=e.aT,p=e.cN,h=e.cO,g=e.bS,f=e.at,v=e.R,I=e.cP,y=e.ao,x=e.W,C=e.T,b=e.cQ,k=e.n,L=e.cR,S=e.cS,N=e.cT,T=e.cU,R=e.cV,P=e.cW,j=e._,M=e.a2,_=e.a3,w=e.cX,A=e.a5,z=e.cY,F=e.cZ,O=e.c_,E=e.c$,U=e.d0,$=e.d1,Y=e.d2},e=>{Z=e.R}],execute:function(){var t=document.createElement("style");t.textContent=".PjFjd{transform:translate(var(--translate-offset, 0));transition:transform 275ms var(--x-timing-ease-out)}.PjFjd>div{position:absolute;top:0;left:0;right:0;flex-wrap:nowrap;width:-webkit-max-content;width:-moz-max-content;width:max-content}.u3j3z>div{animation-name:_19niT;animation-duration:.5s;animation-delay:calc(var(--animation-index) * 50ms);animation-fill-mode:both;animation-timing-function:cubic-bezier(.34,1.85,.64,1);transform-origin:center}@keyframes _19niT{0%{opacity:0;scale:.6}to{opacity:1;scale:1}}.Lam8Z{margin-top:4.5rem;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;gap:var(--x-spacing-small-500)}\n/*$vite$:1*/",document.head.appendChild(t),e("default",(function(){const{paymentLines:e}=k(),{value:t}=L(),{checkout:{latestReceipt:o},telemetryClient:i}=a(),[r,l]=n(S(t,e.value)),[c,d]=n(!1),m=N(),p=T({isModalRendered:c,modalPaymentMethodConfig:r}),h=null==o?void 0:o.id;s((()=>{m()}),[h]);const g=R(),f=P();o&&"processed"===o.status&&function(e,t,n){var o;const s=null===(o=e.purchaseOrder)||void 0===o?void 0:o.paymentLines;if(!s||0===s.length)return;if(s.some((e=>{const o=null==e?void 0:e.method;return!(!o||"wallet"!==o.type||"SHOPIFY_INSTALLMENTS"!==t||"SHOPIFY_INSTALLMENTS"===o.name||(n.leaveErrorBreadcrumb("Installments do not match",{selectedPaymentMethodName:t,receiptPaymentMethod:o}),0))}))){var i;const t=new Y("User selected Installments but Shop Pay is used"),o={checkout:{token:e.token,email:null===(i=e.purchaseOrder)||void 0===i?void 0:i.email,paymentLines:JSON.stringify(s)}};n.error(t,{metadata:o})}}(o,f,i);const{progress:v}=j();return M({stage:_.Complete,id:"Processing"}),w("Processing"),A(z()),s((()=>{v("processing-page-auto-progress")}),[v,i]),s((()=>{const n=S(t,e.value);r!==n&&l(n)}),[t,r,e.value]),s((()=>F({content:p,role:"alert"})),[p]),u($,{children:[u(g?O:E,{}),u(U,{modalPaymentMethodConfig:r,onModalRender:()=>{d(!0)}}),u(W,{receipt:o,message:p})]})}));const q={RemoteCheckoutLogosContainer:"PjFjd",RemoteCheckoutLogos:"u3j3z",ShopName:"Lam8Z"};function H({remoteCheckouts:e}){const{i18n:t,shop:{id:y,name:x,remoteShopsConfigMap:C,brandSettings:b}}=a(),k=function(){const{shop:{id:e}}=a(),[t,l]=n("processing"),c=r();return s((()=>{const e=setTimeout((()=>{l("processed")}),i);return()=>clearTimeout(e)}),[]),o((()=>c?"processed"===t?{shopId:e,status:"submitted",remoteReceipt:{status:"processed"}}:{shopId:e,status:"submitting"}:null),[e,t,c])}(),L=function(e){const[t,a]=n(0),r=o((()=>e.slice(1).some((e=>"submitted"===e.status||"failed"===e.status))),[e]);return s((()=>{if(t>=e.length)return;if(1===t&&!r)return;const n=setTimeout((()=>{a((e=>e+1))}),i);return()=>clearTimeout(n)}),[t,e.length,r]),o((()=>e.map(((e,n)=>n===t?{shopId:e.shopId,status:"loading"}:n<t?"failed"===e.status?{shopId:e.shopId,status:"failed"}:"submitted"===e.status?{shopId:e.shopId,status:"submitted"}:{shopId:e.shopId,status:"loading"}:{shopId:e.shopId,status:"pending"}))),[e,t])}(o((()=>[k,...e].filter((e=>null!==e))),[k,e])),S=o((()=>L.findIndex((({status:e})=>"loading"===e))),[L]),[N,T]=n(S),[R,P]=n("loading");s((()=>{y&&setTimeout((()=>{P("submitted")}),i)}),[y]),s((()=>{-1!==S&&"submitted"===R&&setTimeout((()=>{T(S)}),l)}),[S,R]);const j=o((()=>-1===N?0:`calc(50% - ${N*(c+I)+c/1.75}px)`),[N]),M=d((e=>{const t=null==C?void 0:C.get(e);return null==t?void 0:t.name}),[C]);return u(v,{children:[u("div",{className:m(q.RemoteCheckoutLogosContainer),style:{"--translate-offset":j},children:u(p,{direction:"inline",gap:"base",alignItems:"start",justifyContent:"center",className:m(q.RemoteCheckoutLogos),children:L.map((({shopId:e,status:t},n)=>{var o,s;if(e===y)return u(Z,{index:n,loadingIndex:N,shopName:x,status:R,logoUrl:null==b||null===(s=b.squareLogo)||void 0===s?void 0:s.url},e);const i=null==C?void 0:C.get(e);return u(Z,i?{index:n,loadingIndex:N,logoUrl:null===(o=i.brandSettings)||void 0===o||null===(o=o.squareLogo)||void 0===o?void 0:o.url,shopName:i.name,status:t}:{index:n,loadingIndex:N,status:t},e)}))})}),u(h,{className:q.ShopName,children:[u(g,{children:u(f,{type:"generic",children:function(){var e;if(-1===N)return null;const t=null===(e=L[N])||void 0===e?void 0:e.shopId;return t===y?x:M(null!=t?t:"")}()})}),u(f,{type:"small",color:"subdued",children:t.translate("general.autocomplete_selection",{number:N+1,total:L.length})})]})]})}function W({receipt:e,message:t}){var n;return"processing_remote_checkouts"===(null==e?void 0:e.status)?u(x,{inlineAlignment:"center",spacing:"large500",children:[u(y,{textAlign:"center",children:t}),u(H,{remoteCheckouts:e.remoteCheckouts})]}):"processed"===(null==e?void 0:e.status)&&null!=e&&null!==(n=e.completedRemoteCheckouts)&&void 0!==n&&n.length?u(x,{inlineAlignment:"center",spacing:"large500",children:[u(y,{textAlign:"center",children:t}),u(H,{remoteCheckouts:e.completedRemoteCheckouts})]}):u(x,{inlineAlignment:"center",spacing:"large200",children:[u(C,{maxInlineSize:64,children:u(b,{size:"fill"})}),u(y,{textAlign:"center",children:t})]})}}}}));

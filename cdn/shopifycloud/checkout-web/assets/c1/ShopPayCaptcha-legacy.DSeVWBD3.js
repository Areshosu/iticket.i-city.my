System.register(["./app-legacy.CVtZXpP_.js"],(function(t,e){"use strict";var a,i,n,r,s,o,c,h,p,d,l;return{setters:[t=>{a=t.o$,i=t.s8,n=t.s9,r=t.i,s=t.mR,o=t.aM,c=t.aN,h=t.a,p=t.W,d=t.sa,l=t.aS}],execute:function(){function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function f(t){var e=t&&t.ownerDocument||document;return{document:e,window:e.defaultView||e.parentWindow||window}}function v(t){return t||document.head}var y="hcaptcha-api-script-id",m="hcaptchaOnLoad",R=[],b=t("H",function(t){var n,r;function s(a){var n;return(n=t.call(this,a)||this)._hcaptcha=void 0,n.renderCaptcha=n.renderCaptcha.bind(e(n)),n.resetCaptcha=n.resetCaptcha.bind(e(n)),n.removeCaptcha=n.removeCaptcha.bind(e(n)),n.isReady=n.isReady.bind(e(n)),n.loadCaptcha=n.loadCaptcha.bind(e(n)),n.handleOnLoad=n.handleOnLoad.bind(e(n)),n.handleSubmit=n.handleSubmit.bind(e(n)),n.handleExpire=n.handleExpire.bind(e(n)),n.handleError=n.handleError.bind(e(n)),n.handleOpen=n.handleOpen.bind(e(n)),n.handleClose=n.handleClose.bind(e(n)),n.handleChallengeExpired=n.handleChallengeExpired.bind(e(n)),n.ref=i(),n.apiScriptRequested=!1,n.state={isApiReady:!1,isRemoved:!1,elementId:a.id,captchaId:""},n}r=t,(n=s).prototype=Object.create(r.prototype),n.prototype.constructor=n,u(n,r);var o=s.prototype;return o.componentDidMount=function(){var t=this,e=f(v(this.props.scriptLocation));this._hcaptcha=e.window.hcaptcha||void 0,void 0!==this._hcaptcha?this.setState({isApiReady:!0},(function(){t.renderCaptcha()})):this.loadCaptcha()},o.componentWillUnmount=function(){var t=this.state.captchaId,e=this._hcaptcha;this.isReady()&&(e.reset(t),e.remove(t))},o.shouldComponentUpdate=function(t,e){return this.state.isApiReady===e.isApiReady&&this.state.isRemoved===e.isRemoved},o.componentDidUpdate=function(t){var e=this;["sitekey","size","theme","tabindex","languageOverride","endpoint"].every((function(a){return t[a]===e.props[a]}))||this.removeCaptcha((function(){e.renderCaptcha()}))},o.loadCaptcha=function(){if(!this.apiScriptRequested){var t=this.props,e=t.apihost,a=t.assethost,i=t.endpoint,n=t.host,r=t.imghost;(function(t){void 0===t&&(t={});var e=v(t.scriptLocation);delete t.scriptLocation;var a=f(e),i=R.find((function(t){return t.scope===a.window}));if(a.document.getElementById(y)&&i)return i.promise;var n=new Promise((function(i,n){a.window[m]=i;var r=t.apihost||"https://js.hcaptcha.com";delete t.apihost;var s=a.document.createElement("script");s.id=y,s.src=r+"/1/api.js?render=explicit&onload="+m,s.async=void 0===t.loadAsync||t.loadAsync,delete t.loadAsync,s.onerror=function(t){return n("script-error")};var o=function(t){return Object.entries(t).filter((function(t){t[0];var e=t[1];return e||!1===e})).map((function(t){var e=t[0],a=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(a)})).join("&")}(t);s.src+=""!==o?"&"+o:"",e.appendChild(s)}));return R.push({promise:n,scope:a.window}),n})({apihost:e,assethost:a,endpoint:i,hl:t.languageOverride,host:n,imghost:r,recaptchacompat:!1===t.reCaptchaCompat?"off":null,reportapi:t.reportapi,sentry:t.sentry,custom:t.custom,loadAsync:t.loadAsync,scriptLocation:t.scriptLocation}).then(this.handleOnLoad).catch(this.handleError),this.apiScriptRequested=!0}},o.renderCaptcha=function(t){if(this.state.isApiReady){var e=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),a=this._hcaptcha.render(this.ref.current,e);this.setState({isRemoved:!1,captchaId:a},(function(){t&&t()}))}},o.resetCaptcha=function(){var t=this.state.captchaId,e=this._hcaptcha;this.isReady()&&e.reset(t)},o.removeCaptcha=function(t){var e=this.state.captchaId,a=this._hcaptcha;this.isReady()&&this.setState({isRemoved:!0},(function(){a.remove(e),t&&t()}))},o.handleOnLoad=function(){var t=this;this.setState({isApiReady:!0},(function(){var e=f(v(t.props.scriptLocation));t._hcaptcha=e.window.hcaptcha,t.renderCaptcha((function(){var e=t.props.onLoad;e&&e()}))}))},o.handleSubmit=function(t){var e=this.props.onVerify,a=this.state,i=a.isRemoved,n=a.captchaId,r=this._hcaptcha;if(void 0!==r&&!i){var s=r.getResponse(n),o=r.getRespKey(n);e&&e(s,o)}},o.handleExpire=function(){var t=this.props.onExpire,e=this.state.captchaId,a=this._hcaptcha;this.isReady()&&(a.reset(e),t&&t())},o.handleError=function(t){var e=this.props.onError,a=this.state.captchaId,i=this._hcaptcha;this.isReady()&&i.reset(a),e&&e(t)},o.isReady=function(){var t=this.state,e=t.isApiReady,a=t.isRemoved;return e&&!a},o.handleOpen=function(){this.isReady()&&this.props.onOpen&&this.props.onOpen()},o.handleClose=function(){this.isReady()&&this.props.onClose&&this.props.onClose()},o.handleChallengeExpired=function(){this.isReady()&&this.props.onChalExpired&&this.props.onChalExpired()},o.execute=function(t){void 0===t&&(t=null);var e=this.state.captchaId,a=this._hcaptcha;if(this.isReady())return t&&"object"!=typeof t&&(t=null),a.execute(e,t)},o.setData=function(t){var e=this.state.captchaId,a=this._hcaptcha;this.isReady()&&(t&&"object"!=typeof t&&(t=null),a.setData(e,t))},o.getResponse=function(){return this._hcaptcha.getResponse(this.state.captchaId)},o.getRespKey=function(){return this._hcaptcha.getRespKey(this.state.captchaId)},o.render=function(){var t=this.state.elementId;return a("div",{ref:this.ref,id:t})},s}(n));const C=Object.freeze(Object.defineProperty({__proto__:null,default:function(){var t;const{i18n:e}=r(),{shopPayParts:a}=s(),i=null!==(t="undefined"==typeof window?void 0:window.shopPayCaptchaSiteKey)&&void 0!==t?t:d,n=a.signUpCaptchaRef,u=o(null);return c((()=>{if(u.current)return n.value=u.current,()=>{n.value=void 0}}),[n]),h(l,{accessibilityLabel:e.translate("captcha.title"),children:h(p,{spacing:"small400",children:h(b,{size:"invisible",sitekey:i,languageOverride:e.locale,ref:u})})})}},Symbol.toStringTag,{value:"Module"}));t("S",C)}}}));

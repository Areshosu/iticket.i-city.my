!function(){function e(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){t(r,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function t(e,r,t){return(r=function(e){var r=function(e){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof r?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r,t,n,o,i,s){try{var u=e[i](s),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,o)}System.register(["./app-legacy.CVtZXpP_.js"],(function(e,t){"use strict";var o,i,s,u,c,a,l,p,v,f,y,d,b;return{setters:[e=>{o=e.aM,i=e.aN,s=e.eX,u=e.sA,c=e.k,a=e.jV,l=e.sB,p=e.sC,v=e.z,f=e.sD,y=e.sE,d=e.gF,b=e.i}],execute:function(){e({a:function({enabled:e,onTimeout:r,timeout:n=t}){const s=o(null),u=o(r);u.current=r,i((()=>{if(e)return s.current=setTimeout((()=>u.current(n)),n),()=>{s.current&&clearTimeout(s.current)}}),[e,n])},b:function(e,{cache:t=!0,skip:f=!1,variables:y,getCacheKey:d,onError:b}={}){const h=null!=d?d:u,m=s(),P=h(e,y),S=o(P),g=o(!1),k=c((()=>t&&!f?m.read(P):void 0),[t,f,P,m]),[O,j]=a(p,{data:k,skip:f},l);S.current!==P&&(S.current=P,k&&j({type:"reset",data:k,skip:f})),i((()=>(g.current=!0,()=>{g.current=!1})),[]);const T=v(function(){var o,i=(o=function*(n){var o,i;j({type:"loading"});const s=yield m.query(e,{variables:null!==(o=null==n?void 0:n.variables)&&void 0!==o?o:y,cache:null!==(i=null==n?void 0:n.cache)&&void 0!==i?i:t});g.current&&S.current===P&&j(r({type:"result"},s)),s.error&&b&&b(s.error)},function(){var e=this,r=arguments;return new Promise((function(t,i){var s=o.apply(e,r);function u(e){n(s,t,i,u,c,"next",e)}function c(e){n(s,t,i,u,c,"throw",e)}u(void 0)}))});return function(e){return i.apply(this,arguments)}}(),[P]),w=v((e=>{var r;return T({variables:null!==(r=null==e?void 0:e.variables)&&void 0!==r?r:y,cache:!1})}),[T]);return i((()=>{if(f)return;const{current:e}=S;P===e&&k||T()}),[P,f]),r(r({},O),{},{refetch:w})}});const t=6e4;e("u",(()=>{const e=o(!1),r=b(),t=c((()=>(({persistence:e,html:r,shopPay:t})=>{const n=f(),o=r.getSerialization(y),i={scope:()=>({shopPaySessionTokenKey:n})},s="stored-session-token"===o?void 0:o,u=d.ShopPaySessionToken,c=()=>t.shouldUseSessionToken?null==e?void 0:e.get(d.ShopPaySessionToken,i):void 0;let a;const l=r=>{t.updateSessionToken(r),t.shouldUseSessionToken?r?(()=>{if(!a){const r=null==e?void 0:e.createUpdate(d.ShopPaySessionToken,i);a=null!=r?r:()=>{}}return a})()(r):null==e||e.remove(u,i):null==r&&(null==e||e.remove(u,i))};return{get:()=>t.sessionToken||c(),set:l,load:()=>{if(!t.shouldUseSessionToken)return;t.shouldUseSessionToken&&s&&l(s);const e=c();void 0!==e&&t.updateSessionToken(e)}}})(r)),[r]),{sessionToken:n}=r.shopPay;return e.current||(t.load(),e.current=!0),[n,t.set]}))}}}))}();

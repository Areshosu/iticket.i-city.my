!function(){function e(e,a,t,n,r,o,l){try{var i=e[o](l),s=i.value}catch(e){return void t(e)}i.done?a(s):Promise.resolve(s).then(n,r)}function a(a){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=a.apply(t,n);function i(a){e(l,r,o,i,s,"next",a)}function s(a){e(l,r,o,i,s,"throw",a)}i(void 0)}))}}function t(e,a,t){return(a=function(e){var a=function(e){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var t=a.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof a?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}System.register(["./app-legacy.CVtZXpP_.js"],(function(e,n){"use strict";var r,o,l,i,s,u,c,d,p,y,m,P,v,g,_,h,f,b,S,A,w,E,k,I,C,T,B,F,N,R,L,W,x,M,D,O,$,U,z,V,j,Y,G,q,X,H,K,Q,J,Z,ee,ae,te,ne,re,oe,le,ie,se,ue,ce,de,pe,ye,me,Pe;return{setters:[e=>{r=e.iC,o=e.iD,l=e.iE,i=e.dX,s=e.bJ,u=e.bG,c=e.bC,d=e.iF,p=e.iG,y=e.iH,m=e.i,P=e.hl,v=e.cR,g=e.iI,_=e.iJ,h=e.iK,f=e.cl,b=e.n,S=e.iL,A=e.f8,w=e.iM,E=e.D,k=e.fI,I=e.iN,C=e.k,T=e.z,B=e.au,F=e.iO,N=e._,R=e.iP,L=e.iQ,W=e.j,x=e.fL,M=e.iR,D=e.iS,O=e.hk,$=e.ir,U=e.hp,z=e.gP,V=e.iT,j=e.hN,Y=e.aM,G=e.bF,q=e.b7,X=e.iU,H=e.iV,K=e.iW,Q=e.bL,J=e.aN,Z=e.iX,ee=e.iY,ae=e.iZ,te=e.i_,ne=e.i$,re=e.j0,oe=e.j1,le=e.hr,ie=e.j2,se=e.ci,ue=e.a,ce=e.j3,de=e.j4,pe=e.j5,ye=e.R,me=e.j6,Pe=e.j7}],execute:function(){e("default",(function({buttonLabel:e="paypal",progressToNextPage:t=!1,isPayWithPayPalFlow:n=!1,fundingSource:r="paypal",isDisabled:o=!1}){var i,me;const ve=c(),ge=B().geolocation.country.code,_e=function(){const{locale:e}=m().i18n;return C((()=>{if(e in we)return we[e];const[a]=e.split("-");return we[a]||"en-US"}),[e])}(),{email:Re,billingAddressOption:De,acceptPaymentVaulting:Oe}=b(),$e=F(),{progress:Ue,negotiate:ze}=N(),{markAsLoaded:Ve}=R(),je=L("payPal"),Ye=W(),Ge=null===(i=v())||void 0===i?void 0:i.value,qe=x(),Xe=M(),He=null==Ge?void 0:Ge.find((e=>"wallet"===e.type&&e.name===We)),Ke=null==He?void 0:He.clientToken,Qe=(null===(me=w(We))||void 0===me?void 0:me.paymentIntent)===Te.BILLING_AGREEMENT||n&&qe&&Oe.value&&_(Ge),Je="paypal"===r?P.PayPalV6:P.Venmo,Ze=D(),ea=O(Je),aa=$(Je),ta=U(Je),na=z(null),{isScrimOpen:ra,closePopupWindowsAndScrim:oa}=V({endpoint:na,invokingWallet:"PAYPAL_EXPRESS"}),la=z(!1),ia=j(o),sa=j(ea),ua=j(Ge),ca=Y(Qe),{isInPayPalContextSignal:da,inMemoryPayPalParts:{isLoadingPaymentSheet:pa,accountStatus:ya,isApproving:ma},inMemoryVenmoParts:{buttonStatus:Pa},persistedPayPalSignal:va}=u(),ga=G({isPayWithPayPalButton:n}),_a=Y(null),ha=q(),fa=X(),ba=E(H),{i18n:Sa,telemetryClient:Aa,shop:wa,wallets:Ea}=m(),ka=n?K.PaymentMethod:K.Express,Ia="venmo"===r?Sa.translate("brand.venmo"):Sa.translate("brand.paypal");Q({active:ma.value}),J((()=>(Aa.leaveErrorBreadcrumb("[PayPalButton] mounted",{isPayWithPayPalFlow:n,fundingSource:r,isTikTokApp:ee(),browserSupportsPopupFlow:!ee()&&!ae()||Z()}),()=>{Aa.leaveErrorBreadcrumb("[PayPalButton] unmounting",{activeSession:Ea.activeSession,isInPayPalContextSignal:da.peek(),isScrimOpen:ra.peek(),iframeIsFullScreen:la.peek(),isPayWithPayPalFlow:n,fundingSource:r})})),[]);const Ca=te(),Ta=z(!1);J((()=>{!ra.value&&Ta.value&&(Ca(),Ta.value=!1)}),[ra.value,Ca,Ta.value,Ta]);const Ba=T((e=>{g.exists("paypal_authorization")?Aa.histogram({name:"wallet_authorization_complete",value:g.end("paypal_authorization"),attributes:{instrument:Je,result:"failed"}}):Aa.counter({name:"wallet_sheet_failed",value:1,attributes:{instrument:Je}}),sa.current(le.Failure,ka),Aa.error(e),ya.value={status:"error"}}),[sa,ya,Aa,Je,ka]),Fa=T(((e,a)=>{"venmo"===a?Pa.value={status:e}:ga.value={status:e}}),[Pa,ga]),Na=T(function(){var t=a((function*(a){var t;const o=ne(_a.current);if("venmo"===r&&Qe)return Fa("not_eligible",r),void Ve();na.value=a;const l=!(ae()&&!Z()||ee()||re());Aa.leaveErrorBreadcrumb("[PayPalButton] browserSupportsPopupFlow",{browserSupportsPopupFlow:l});const i=yield a.call.configure({clientToken:Ke,locale:_e,fundingSource:r,isBillingAgreement:Qe,buttonLabel:e,isPayWithPayPal:n,browserSupportsPopupFlow:l,style:{borderRadius:o},sandboxTestMode:null!==(t=null==He?void 0:He.sandboxTestMode)&&void 0!==t&&t});Ve(),i.status===oe.Success?(Fa("rendered",r),Aa.counter({name:"checkout_wallet_button_rendered",value:1,attributes:{wallet_name:Je,status:"success",isPaymentMethodFlow:n}})):(i.status===oe.ScriptLoadError&&(Aa.log("paypal_button_script_load_failed","[PayPalButton] script load error",{errorMessage:i.message}),Aa.counter({name:"checkout_wallet_button_rendered",value:1,attributes:{wallet_name:Je,status:"error",reason:"script_load_error",isPaymentMethodFlow:n}})),i.status===oe.Error&&(Aa.leaveErrorBreadcrumb("[PayPalButton] sandbox error",{message:i.message,type:i.type,errorLocation:i.errorLocation}),Aa.error(new be(i.message,{groupingHash:"PayPalExpressError::SandboxError"})),Aa.counter({name:"checkout_wallet_button_rendered",value:1,attributes:{wallet_name:Je,status:"error",reason:"sandbox_error",isPaymentMethodFlow:n}})),i.status===oe.UnsupportedBrowser&&Aa.counter({name:"paypal_unsupported_browser",value:1,attributes:{payWithPayPal:n,fundingSource:r,reason:"unsupported_browser"}}),sa.current(le.Failure),ya.value={status:"error"},Fa("error",r))}));return function(e){return t.apply(this,arguments)}}(),[r,na,Ke,_e,Qe,e,n,null==He?void 0:He.sandboxTestMode,Ve,Fa,sa,ya,Aa,Je]);J((()=>{const e=function(){var e=a((function*(){if(ca.current!==Qe&&na.value){if(ca.current=Qe,"venmo"===r&&Qe)return void Fa("not_eligible",r);const e=yield na.value.call.setBillingAgreementRequirement(Qe);Aa.counter({name:"checkout_wallet_button_rendered",value:1,attributes:{wallet_name:Je,isPaymentMethodFlow:n,billingAgreementUpdate:!0,status:e.status===oe.Success?"success":"error"}})}}));return function(){return e.apply(this,arguments)}}();e()}),[Qe,r,na,n,Je,Aa,Fa]);const Ra=T((()=>{Aa.leaveErrorBreadcrumb("[PayPalButton] expandIFrame"),xe(),la.value=!0}),[la,Aa]),La=T((()=>{var e;la.value&&(null===(e=na.value)||void 0===e||e.call.cleanup(),Me(),la.value=!1)}),[na,la]),Wa=T((e=>{var a;Aa.leaveErrorBreadcrumb("[PayPalButton] setModalScrimOpen",{open:e,isScrimOpen:ra.value,activeSession:Ea.activeSession,iframeIsFullScreen:la.value}),ra.value=e,(e||"PAYPAL_EXPRESS"===(null===(a=Ea.activeSession)||void 0===a?void 0:a.wallet))&&(e?Ea.setActiveSession({newValue:"PAYPAL_EXPRESS",asPaymentMethod:n}):Ea.clearActiveSession({invokingWallet:"PAYPAL_EXPRESS"})),n||(se.value=e?"paypal":"none"),e||La()}),[ra,La,Aa,la,n,Ea]),xa=function({fundingSource:e,isPayWithPayPalFlow:t=!1,onSuccess:n,onError:r}){var o,l,i;const C=function({isPayWithPayPalFlow:e}){const{telemetryClient:a}=m(),{purchasingCompany:t}=s();return function(n){const{prefillingDestinationAddress:r,email:o,expiresAt:l,billingAgreementStatus:i,prefillingBillingAddress:s,payerApprovedAmount:u}=n;return t?{email:o,expiresAt:l,billingAgreementStatus:i,payerApprovedAmount:u}:null!=r||e?r&&"StreetAddress"!==r.__typename&&"InvalidWalletPrefillingAddress"!==r.__typename?(a.error(new be(`Unsupported PayPal address type: ${r.__typename}`),{errorClass:h.Api}),!1):s&&"StreetAddress"!==s.__typename&&"InvalidWalletPrefillingAddress"!==s.__typename?(a.error(new be(`Unsupported PayPal address type: ${s.__typename}`),{errorClass:h.Api}),!1):{email:o,address:r,expiresAt:l,billingAddress:s,billingAgreementStatus:i,payerApprovedAmount:u}:(a.error(new be("No address returned by PayPal"),{errorClass:h.Api}),!1)}}({isPayWithPayPalFlow:t}),T=function({isPayWithPayPalFlow:e}){const a=f(),{email:t,paymentLines:n,shippingAddress:r,billingAddress:o,acceptPaymentVaulting:l}=b(),i=S(),{value:s}=A(),u=p(y),c=null==u?void 0:u.identitySourceSignal,d=null==u?void 0:u.vaultedSectionsSignal.value.billing,m=w("PAYPAL_EXPRESS"),P=Se({isPayWithPayPalFlow:e}),v=Ae({isPayWithPayPalFlow:e}),g=E(k),_=i&&(!(null!=s&&s.email)||!e);function h(e,t){for(const[n,r]of Object.entries(t)){if("__typename"===n)continue;if("InvalidWalletPrefillingAddress"===t.__typename&&!a.isVisible(n))continue;const o=e.fields[n];o&&(o.value=r||void 0)}}return function(a){var i;_&&(t.value=a.email),a.address&&v&&h(r,a.address),!a.billingAddress||"payPal"===(null==c?void 0:c.value)&&d||g?P&&a.address&&h(o,a.address):h(o,a.billingAddress);const s={method:{type:"wallet",name:"PAYPAL_EXPRESS",walletContent:{payerId:a.payerId,token:a.orderId,email:a.email,paymentMethodIdentifier:null!==(i=null==m?void 0:m.paymentMethodIdentifier)&&void 0!==i?i:"",expiresAt:a.expiresAt,merchantId:null==m?void 0:m.merchantId,payerApprovedAmount:a.payerApprovedAmount,currencyCode:a.currencyCode}}},u=n.peek();n.value=I(u,s),e||(l.value=!1)}}({isPayWithPayPalFlow:t}),{inMemoryPayPalParts:{accountStatus:B},persistedPayPalSignal:F}=u(),N=c(),R=null===(o=d().value)||void 0===o?void 0:o.currencyCode,L=null===(l=p(y))||void 0===l?void 0:l.identitySourceSignal,{telemetryClient:W}=m(),x="paypal"===e?P.PayPalV6:P.Venmo,M=null===(i=v())||void 0===i?void 0:i.value;return function(){var o=a((function*(a){W.counter({name:"wallet_authorization_attempt",value:1,attributes:{instrument:x}}),g.start("paypal_authorization"),B.value={status:"loading"};try{var o,l,i;const r=yield fe({graphql:N,paypalToken:_(M)&&a.billingToken||a.orderId,telemetryClient:W}),s=C(r);if(!s)throw new be("PayPal returned invalid data");T({address:s.address,email:s.email,payerId:a.payerId,orderId:r.remoteOrderId||a.orderId,expiresAt:s.expiresAt,billingAddress:null!==(o=s.billingAddress)&&void 0!==o?o:void 0,payerApprovedAmount:null!==(l=s.payerApprovedAmount)&&void 0!==l?l:void 0,currencyCode:R});const u=!("payPal"===(null==L?void 0:L.peek()))&&t;F.value={isVenmo:"venmo"===e,isPayWithPayPalFlow:u,tokenCurrencyCode:R,receiptIdForClearedToken:null===(i=F.peek())||void 0===i?void 0:i.receiptIdForClearedToken,billingAgreementStatus:s.billingAgreementStatus},B.value={status:"connected",email:s.email,token:r.remoteOrderId||a.orderId},null==n||n()}catch(s){throw null==r||r(s),s}}));return function(e){return o.apply(this,arguments)}}()}({fundingSource:r,isPayWithPayPalFlow:n,onSuccess:(tt=a((function*(){ma.value=!0,sa.current(le.Success,ka),Aa.counter({name:"paypal_approved",value:1,attributes:{payWithPayPal:n,fundingSource:r}}),Wa(!1)})),function(){return tt.apply(this,arguments)})}),Ma=j(xa),Da=T((({errorUnactionable:e,errorMessage:a,errorName:t,stack:n})=>{Aa.leaveErrorBreadcrumb("[PayPalButton] paymentFlowError",{errorMessage:a,stack:n}),Wa(!1),pa.value=!1;const r=`${t?`${t}: `:""}${a}`;if(e||null!=t&&t.includes("Unactionable")){const e=new Fe(r);e.stack=n,Ba(e)}else{const e=new Be(r,{groupingHash:"PayPalPaymentFlowError::UnexpectedError"});e.stack=n,Ba(e)}}),[Wa,pa,Ba,Aa]),Oa=j(Da),$a=!E(k),Ua=T(a((function*(){var e;if(fa(_a),ia.current||Ea.activeSession)return Wa(!1),void(null===(e=na.value)||void 0===e||e.call.closePopupWindows());if(pa.value=!0,sa.current(le.Clicked,ka),Aa.counter({name:"wallet_sheet_clicked",value:1,attributes:{instrument:Je}}),ra.value=!0,!n)return sa.current(le.Initialized,ka),void Wa(!0);const a=_(ua.current)&&$a;try{const e=yield new Promise(((e,t)=>{ze({runListenersOnError:!0,negotiationStage:"completion",include:a||"custom"!==De.value?[]:["billingAddress"],onComplete:e}).catch(t)})),t=()=>{sa.current(le.Initialized,ka),ha.current?Wa(!0):Aa.leaveErrorBreadcrumb("PayPalButton: Skipping setModalScrimOpen - component unmounted")},n="error"===e.status&&e.violations.length>0&&e.violations.every((({code:e})=>Ne.has(e)));"success"===e.status?t():n?(Aa.counter({name:"paypal_silenced_violations_requiring_new_token",value:1}),Aa.log("paypal_silenced_violations","PayPalButton: silenced violations",{violations:e.violations}),t()):(oa(),Ta.value=!0,pa.value=!1,Aa.log("paypal_button_popup_closed_negotiation_errors","PayPalButton: closing popup because of negotiation errors",{result:e}))}catch(t){oa(),pa.value=!1,Oa.current({errorMessage:`negotiation threw unexpectedly when validating guest checkout for PayPal: ${t instanceof Error?`[${t.name}] ${t.message}`:null==t?void 0:t.toString()}`,errorName:t instanceof Error?t.name:void 0,errorUnactionable:t instanceof l&&t.isUnactionable()})}})),[fa,ia,pa,sa,ka,ra,n,$a,Wa,na,ze,ua,De,Aa,Je,oa,Oa,ha,Ta,Ea]),za=j(Ua),Va=T((()=>{Aa.leaveErrorBreadcrumb("[PayPalButton] cancelled"),Wa(!1),pa.value=!1,sa.current(le.Cancelled),Aa.counter({name:"wallet_sheet_cancelled",value:1,attributes:{instrument:Je}})}),[Wa,pa,sa,Aa,Je]),ja=j(Va),Ya=T(function(){var e=a((function*(e){Aa.leaveErrorBreadcrumb("[PayPalButton] payment approved",{hasOnApproveRef:Boolean(Ma.current)}),La();try{return Ma.current?(yield Ma.current(e),!0):(Oa.current({errorMessage:"onApproveRef is not set",errorName:void 0,errorUnactionable:!1}),!1)}catch(a){const e=a;return Oa.current({errorMessage:`onApprove handler failed: ${String(e)}`,stack:null==e?void 0:e.stack,errorName:null==e?void 0:e.name,errorUnactionable:e instanceof l&&e.isUnactionable()}),!1}}));return function(a){return e.apply(this,arguments)}}(),[Aa,La,Ma,Oa]),Ga=j(Ya),qa=T(a((function*(){Aa.leaveErrorBreadcrumb("[PayPalButton] negotiating or progressing after payment approved");try{t?(Aa.leaveErrorBreadcrumb("[PayPalButton] progressing to next page after payment approved",{onePageCheckout:Ye,isPayWithPayPalFlow:n}),yield Ue("paypal-payment-approved",(e=>{var a;ba&&_(ua.current)&&("rejected"===e.status||wa.confirmationPageEnabled)&&Ye&&"violations"in e&&(null===(a=e.violations)||void 0===a?void 0:a.some((e=>"BUYER_IDENTITY_MISSING_CONTACT_METHOD"!==e.code&&Pe.has(e.code))))&&(Aa.log("paypal_payment_method_vaulted_state","[PayPalButton] Entering vaulted state in payment method flow due to billing address violations",{violations:e.violations}),Aa.counter({name:"paypal_payment_method_vaulted_state",value:1}),je(),va.value&&(va.value.isPayWithPayPalFlow=!1))}),{skipToCompletion:Xe}),Aa.leaveErrorBreadcrumb("[PayPalButton] progression complete")):Ye?(Aa.leaveErrorBreadcrumb("[PayPalButton] updating identity source and address after payment approved",{isPayWithPayPalFlow:n}),n||je(),null==Ze||Ze.dispatch("addressReplaced")):(Aa.leaveErrorBreadcrumb("[PayPalButton] negotiating after payment approved"),yield ze({runListenersOnError:!0})),ea(le.Success,ka),g.endAndRun("paypal_authorization",(e=>{Aa.histogram({name:"wallet_authorization_complete",value:e,attributes:{instrument:Je,result:"success"}})}))}catch(e){Ba(e)}finally{ma.value=!1}})),[ma,t,Ye,ea,ka,Ue,n,je,Ze,ze,Aa,Je,Ba,Xe,ba,ua,va,wa]),Xa=j(qa),Ha=T((e=>{Aa.leaveErrorBreadcrumb("[PayPalButton] onComplete callback triggered",{paymentSessionState:e.paymentSessionState,fundingSource:r}),"approved"===e.paymentSessionState&&Xa.current()}),[r,Xa,Aa]),Ka=j(Ha),Qa=T(a((function*(){const e="venmo"===r,a=Re.value;Aa.leaveErrorBreadcrumb("[PayPalButton] createOrder",{isInPayPalContextSignal:da.value}),aa();const t=yield he({graphql:ve,countryCode:ge,email:a,venmoPayment:e,getNegotiationVariables:$e,isPayWithPayPalFlow:n,telemetryClient:Aa,isBillingAgreement:Qe});return Aa.leaveErrorBreadcrumb("[PayPalButton] Created paypal token",{token:t,isBillingAgreement:Qe}),n||ta(),pa.value=!1,Qe?{billingToken:t}:{orderId:t}})),[r,Re,aa,ve,ge,$e,n,Aa,pa,Qe,ta,da]),Ja=j(Qa),Za=ie(),et=Ee(),at=C((()=>({clicked:()=>za.current(),cancelled:()=>ja.current(),createOrder:()=>Ja.current(),paymentFlowError:({errorMessage:e,errorName:a,errorUnactionable:t,stack:n})=>Oa.current({errorMessage:e,errorName:a,errorUnactionable:t,stack:n}),paymentApproved:e=>Ga.current(e),negotiateOrProgressOnApprove:()=>Xa.current(),expandIFrame:Ra,telemetry:Za,logger:et,onComplete:e=>Ka.current(e)})),[za,ja,Ja,Oa,Ga,Xa,Ra,Za,et,Ka]);var tt;J((()=>()=>{var e;const a="venmo"===r?Pa.peek().status:ga.peek().status;Aa.leaveErrorBreadcrumb("[PayPalButton] unmount cleanup",{isPayWithPayPalFlow:n,isVenmo:"venmo"===r,buttonStatus:a,activeSession:Ea.activeSession,isScrimOpen:ra.peek(),iframeIsFullScreen:la.peek(),isLoadingPaymentSheet:pa.peek()}),"error"!==a&&"not_eligible"!==a&&Fa("not_rendered",r),"PAYPAL_EXPRESS"===(null===(e=Ea.activeSession)||void 0===e?void 0:e.wallet)?(Aa.leaveErrorBreadcrumb("PayPalButton cleanup: resetting activeSession"),Ea.clearActiveSession({invokingWallet:"PAYPAL_EXPRESS"})):Aa.leaveErrorBreadcrumb("[PayPalButton] cleanup: NOT resetting activeSession (not in PayPal context)",{activeSession:Ea.activeSession}),"paypal"===se.value?(Aa.leaveErrorBreadcrumb("PayPalButton cleanup: resetting checkoutProtocolModalEventSignal"),se.value="none"):"none"!==se.value&&Aa.leaveErrorBreadcrumb("[PayPalButton] cleanup: NOT resetting checkoutProtocolModalEventSignal - unexpected value",{currentValue:se.value}),pa.value=!1}),[]);const nt=n?Le:void 0,rt=C((()=>"venmo"===r?Ce:n?Ie:ke),[r,n]);if(!Ke)return Aa.counter({name:"paypal_missing_client_token",value:1,attributes:{payWithPayPal:n,fundingSource:r}}),null;const ot=ra.value&&!la.value;return ue(ye,{children:[ue(ce,{wallet:rt,onConnect:Na,onTerminate:()=>na.value=null,hostMethods:at,height:nt,isFullScreen:la.value,ref:_a}),ue(de,{isOpen:ra.value,isInvisible:la.value,onClick:oa,children:ot&&ue(pe,{walletName:Ia,handleClose:oa})})]})}));const n={id:"0fa76b795ebebf40f3b9b6dd862a21938943ea331af4869d59762cafe62d5b1d",type:"query",name:"PaypalDetailsQuery",source:"query PaypalDetailsQuery($paypalDetailsInput:PaypalGetBuyerDetailsInput,$pendingTask:PendingTaskInput){paypalDetails(input:{paypalDetailsInput:$paypalDetailsInput,pendingTask:$pendingTask}){...on PaypalDetailsFetchSuccess{remoteOrderId email note billingAgreementStatus prefillingDestinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidWalletPrefillingAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone validationErrors{code localizedDescription nonLocalizedDescription __typename}__typename}__typename}prefillingBillingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidWalletPrefillingAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone validationErrors{code localizedDescription nonLocalizedDescription __typename}__typename}__typename}expiresAt payerApprovedAmount{amount currencyCode __typename}__typename}...on PaypalDetailsFetchFailed{code __typename}...on PendingTask{taskId pollDelay __typename}__typename}}"},ve={id:"c9927a7f9b25545ab4f84efdbff043d1960ecd5a51bd2cf594d3b643db98c764",type:"query",name:"PaypalTokenQuery",source:"query PaypalTokenQuery($paypalTokenCreate:PaypalTokenCreateInput,$pendingTask:PendingTaskInput){paypalToken(input:{paypalTokenCreate:$paypalTokenCreate,pendingTask:$pendingTask}){...on PaypalTokenCreationSuccess{token __typename}...on PaypalTokenCreationFailed{code __typename}...on PendingTask{taskId pollDelay __typename}__typename}}"};class ge extends l{constructor(...e){super(...e),t(this,"name","PayPalAPIError")}}class _e extends l{constructor(...e){super(...e),t(this,"name","UnactionablePayPalAPIError"),t(this,"unactionable",!0)}}const he=function(){var e=a((function*({graphql:e,countryCode:t,email:n,venmoPayment:l,getNegotiationVariables:i,isPayWithPayPalFlow:s,telemetryClient:u,isBillingAgreement:c}){const d=yield i(),p=function(){var r=a((function*(a){const{data:r,error:o}=yield e.query(ve,{cache:!1,variables:a?{pendingTask:{taskId:a}}:{paypalTokenCreate:{merchandiseSource:{proposal:d},countryCode:t,email:n,venmoPayment:l,paymentMethodFlow:s,billingAgreement:c}}});if(null!=o)throw P({code:"GENERIC_ERROR",unactionable:!0,error:o});if(null==r)throw P({code:"NO_DATA",unactionable:!1});return r}));return function(e){return r.apply(this,arguments)}}();let y=0,m="";for(;;){const{paypalToken:e}=yield p(m);switch(e.__typename){case"PaypalTokenCreationFailed":throw P({code:e.code,unactionable:!0});case"PaypalTokenCreationSuccess":return e.token;case"PendingTask":if(m=e.taskId,y+=1,y>=5)throw P({code:"REACHED_MAX_POLLING",unactionable:!0});yield o(e.pollDelay);break;default:r(e)}}function P({code:e,unactionable:a,error:t}){u.counter({name:"paypal_token_create_error",value:1,attributes:{code:e}}),u.log("paypal_api_create_paypal_token_failed","createPayPalToken failed",{attributes:{code:e}});const n=`createPayPalToken failed with code: ${e}${t?`, ${t.name}: ${t.message}`:""}`;return a?new _e(n,{cause:t}):new ge(n,{cause:t})}}));return function(a){return e.apply(this,arguments)}}(),fe=function(){var e=a((function*({graphql:e,paypalToken:t,telemetryClient:l}){const i=function(){var t=a((function*(a,t){const{data:r,error:o}=yield e.query(n,{cache:!1,variables:t?{pendingTask:{taskId:t}}:{paypalDetailsInput:{token:a}}});if(null!=o)throw c({code:"GENERIC_ERROR",unactionable:!0,error:o});if(null==r)throw c({code:"NO_DATA",unactionable:!1});return r}));return function(e,a){return t.apply(this,arguments)}}();let s=0,u="";for(;;){const{paypalDetails:e}=yield i(t,u);switch(e.__typename){case"PaypalDetailsFetchFailed":throw c({code:e.code,unactionable:!0});case"PaypalDetailsFetchSuccess":return e;case"PendingTask":if(u=e.taskId,s+=1,s>=5)throw c({code:"REACHED_MAX_POLLING",unactionable:!0});yield o(e.pollDelay);break;default:r(e)}}function c({code:e,unactionable:a,error:t}){l.counter({name:"paypal_fetch_details_error",value:1,attributes:{code:e}}),l.log("paypal_api_fetch_paypal_details_failed","fetchPayPalDetails failed",{attributes:{code:e,errorName:null==t?void 0:t.name,errorMessage:null==t?void 0:t.message}});const n=`fetchPayPalDetails failed with code: ${e}${t?`, ${t.name}: ${t.message}`:""}`;return a?new _e(n,{cause:t}):new ge(n,{cause:t})}}));return function(a){return e.apply(this,arguments)}}();class be extends l{constructor(...e){super(...e),t(this,"name","PaypalExpressError")}}const Se=({isPayWithPayPalFlow:e=!1})=>{const{shippingRequired:a}=i(),{purchasingCompany:t}=s();return!t&&!e&&!a},Ae=({isPayWithPayPalFlow:e=!1})=>{const{shippingRequired:a}=i(),{purchasingCompany:t}=s();return!(t||!a||e)},we={ar:"ar-EG",bg:"en-BG",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",he:"he-IL",hi:"en-IN",hr:"en-HR",hu:"hu-HU",id:"id-ID",it:"it-IT",ja:"ja-JP",ka:"en-GE",ko:"ko-KR",lt:"en-LT",ms:"en-MY",nb:"no-NO",nl:"nl-NL",pl:"pl-PL","pt-BR":"pt-BR","pt-PT":"pt-PT",ro:"en-RO",ru:"ru-RU",sk:"sk-SK",sl:"en-SI",sr:"en-RS",sv:"sv-SE",th:"th-TH",tr:"tr-TR",vi:"en-VN","zh-CN":"zh-CN","zh-TW":"zh-TW"},Ee=()=>{const{telemetryClient:e}=m();return T((({message:a,attributes:t={}})=>{e.log("sandbox_log_handled",a,t)}),[e])},ke="PAYPAL_EXPRESS",Ie="PAY_WITH_PAYPAL",Ce="VENMO",Te={BILLING_AGREEMENT:"TOKENIZE"};class Be extends l{constructor(...e){super(...e),t(this,"name","PayPalPaymentFlowError")}}e("PayPalPaymentFlowError",Be);class Fe extends l{constructor(...e){super(...e),t(this,"name","UnactionablePayPalPaymentFlowError"),t(this,"unactionable",!0)}}e("UnactionablePayPalPaymentFlowError",Fe);const Ne=new Set(me),Re=e("DISABLE_VIEW_TRANSITIONS_STYLE","disable-view-transitions-for-paypal-pci"),Le="54px",We="PAYPAL_EXPRESS",xe=()=>{const e=document.createElement("style");e.setAttribute("id",Re),e.textContent="\n    * {\n      view-transition-name: none !important;\n    }\n  ",document.head.appendChild(e)},Me=()=>{const e=document.getElementById(Re);e&&e.remove()}}}}))}();
